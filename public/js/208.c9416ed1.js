"use strict";(self["webpackChunkui"]=self["webpackChunkui"]||[]).push([[208],{712:function(t,o,e){e.d(o,{c:function(){return c}});var i=e(4108);const n={id:"popup-container"},s={id:"close-btn"},a={id:"popup-contents"};function l(t,o,e,l,d,u){return(0,i.Wz)(),(0,i.An)("div",n,[(0,i.QD)("div",s,[(0,i.QD)("button",{id:"off-btn",onClick:o[0]||(o[0]=t=>u.PopupOff())},"X")]),(0,i.QD)("div",a,[(0,i.oF)(t.$slots,"contents",{},void 0,!0)])])}var d={methods:{PopupOff:function(){this.$emit("PopupSwitchOff",!1)}}},u=e(4100);const r=(0,u.c)(d,[["render",l],["__scopeId","data-v-24233943"]]);var c=r},4208:function(t,o,e){e.r(o),e.d(o,{default:function(){return Z}});var i=e(4108);const n={id:"portfolios"},s={id:"main-portfolio-sector"},a={id:"sub-portfolio-sector"};function l(t,o,e,l,d,u){const r=(0,i.E1)("NewPortfolio"),c=(0,i.E1)("PopupSlot"),f=(0,i.E1)("MainPortfolio"),h=(0,i.E1)("SubPortfolio");return(0,i.Wz)(),(0,i.An)("main",n,[d.popUpOnOff?((0,i.Wz)(),(0,i.Az)(c,{key:0,onPopupSwitchOff:u.setPopupSwitch},{contents:(0,i.Ql)((()=>[(0,i.K2)(r,{onPopupSwitchOff:u.setPopupSwitch,onEmitDataAdded:u.funcDataAdded},null,8,["onPopupSwitchOff","onEmitDataAdded"])])),_:1},8,["onPopupSwitchOff"])):(0,i.g1)("",!0),(0,i.QD)("div",s,[(0,i.K2)(f,{MainPortfolioData:d.MainPortfolioData},null,8,["MainPortfolioData"])]),(0,i.QD)("div",a,[(0,i.K2)(h,{onPortfolioData:u.sendDataToMain,onPopupSwitchOn:u.setPopupSwitch,dataAdded:d.dataAdded},null,8,["onPortfolioData","onPopupSwitchOn","dataAdded"])])])}var d=e(9096);const u=t=>((0,i.ED)("data-v-2f615ba4"),t=t(),(0,i.ii)(),t),r={id:"main-portfolio"},c=u((()=>(0,i.QD)("p",{id:"portfolio-name"},null,-1))),f=u((()=>(0,i.QD)("div",{id:"main-donut"},[(0,i.QD)("div",{id:"main-donut-chart",style:{width:"100%",height:"361px"}}),(0,i.QD)("p",{id:"evalutaion"},"Evaluation")],-1))),h={id:"assets-in-portfolio"},p=u((()=>(0,i.QD)("input",{type:"checkbox",name:"color-section",disabled:""},null,-1))),D={class:"asset-label"};function m(t,o,e,n,s,a){return(0,i.Wz)(),(0,i.An)("div",r,[c,f,(0,i.QD)("div",h,[((0,i.Wz)(!0),(0,i.An)(i.ae,null,(0,i.mi)(Object.keys(this.Data),((t,o)=>((0,i.Wz)(),(0,i.An)("label",{key:o},[p,(0,i.QD)("div",D,[(0,i.QD)("span",null,(0,d.WA)(t),1),(0,i.QD)("span",null,(0,d.WA)((this.Data[t]/this.Sum*100).toFixed(2))+"%",1)])])))),128))])])}var A={props:["MainPortfolioData"],data(){return{Data:{"":0},Sum:1}},updated(){this.$Color_Tag()},watch:{MainPortfolioData:function(t){this.Data=t.ASSETS,this.Sum=Object.values(this.Data).reduce(((t,o)=>t+o),0)}}},v=e(4100);const g=(0,v.c)(A,[["render",m],["__scopeId","data-v-2f615ba4"]]);var S=g;const b=t=>((0,i.ED)("data-v-3af6a1c0"),t=t(),(0,i.ii)(),t),P={id:"sub-portfolio"},Q={id:"sub-portfolio-charts"},k=["onClick"],y={class:"sub-donuts-title"},C=["value"],E=b((()=>(0,i.QD)("div",{class:"sub-donuts-chart"},null,-1))),w={id:"sub-portfolio-btns"},R={id:"btn-set"};function W(t,o,e,n,s,a){return(0,i.Wz)(),(0,i.An)("div",P,[(0,i.QD)("div",Q,[((0,i.Wz)(!0),(0,i.An)(i.ae,null,(0,i.mi)(s.Data,((t,o)=>((0,i.Wz)(),(0,i.An)("div",{key:o,class:"sub-donuts",onClick:t=>a.Change_Donut_Chart(o)},[(0,i.QD)("div",y,[s.Rmv?((0,i.Wz)(),(0,i.An)("input",{key:0,type:"checkbox",value:t._id},null,8,C)):(0,i.g1)("",!0),(0,i.QD)("div",null,(0,d.WA)(t.NAME),1)]),E],8,k)))),128))]),(0,i.QD)("div",w,[(0,i.QD)("div",R,[s.Rmv?(0,i.g1)("",!0):((0,i.Wz)(),(0,i.An)("button",{key:0,onClick:o[0]||(o[0]=t=>a.PopupOn())},"+")),s.Rmv?(0,i.g1)("",!0):((0,i.Wz)(),(0,i.An)("button",{key:1,onClick:o[1]||(o[1]=t=>a.SettingMode(!1,!0))},"-")),s.Rmv?((0,i.Wz)(),(0,i.An)("button",{key:2,onClick:o[2]||(o[2]=t=>a.RemovePortfolio())},"R")):(0,i.g1)("",!0),s.Rmv?((0,i.Wz)(),(0,i.An)("button",{key:3,onClick:o[3]||(o[3]=t=>a.SettingMode(!1,!1))},"C")):(0,i.g1)("",!0)])])])}e(3248);var N={props:["dataAdded"],data(){return{Data:null,Setting:!1,Rmv:!1}},created(){this.getPortfolios()},updated(){if(this.Setting)for(let t=0;t<=this.Data.length;t++)0===Number(t)&&this.$Donut_Chart_With_Detail(this.Data[t],"#main-donut-chart"),this.$Donut_Chart(this.Data[t].ASSETS,`.sub-donuts:nth-of-type(${Number(t)+1}) > .sub-donuts-chart`);this.Setting=!1},watch:{dataAdded:function(t){this.getPortfolios()}},methods:{Change_Donut_Chart:function(t){this.$emit("portfolioData",this.Data[t]),this.$Donut_Chart_With_Detail(this.Data[t],"#main-donut-chart")},PopupOn:function(){this.$emit("PopupSwitchOn",!0)},getPortfolios:function(){this.SettingMode(!0,!1),this.$http.get("/portfolio/getPortfolioData").then((t=>{this.Data=t.data,this.$emit("portfolioData",this.Data[0])})).catch((t=>{t.message.indexOf("Network Error")>-1&&alert("Error")}))},RemovePortfolio:function(){const t=[];for(const o of document.querySelectorAll(".sub-donuts-title input[type='checkbox']"))o.checked&&t.push(o.value);0!==t.length&&this.$http.post("/portfolio/removePortfolios",{params:t}).then((t=>this.getPortfolios())).catch((t=>{t.message.indexOf("Network Error")>-1&&alert("Error")}))},SettingMode:function(t,o){[this.Setting,this.Rmv]=[t,o];for(const e of document.querySelectorAll(".sub-donuts-title"))e.style.justifyContent=this.Rmv?"left":"center"}}};const O=(0,v.c)(N,[["render",W],["__scopeId","data-v-3af6a1c0"]]);var _=O,$=e(712),M=e(7764);const T=t=>((0,i.ED)("data-v-4fd59fb7"),t=t(),(0,i.ii)(),t),z={id:"new-portfolio"},x={id:"included-assets"},K=T((()=>(0,i.QD)("div",{id:"included-assets-thead"},[(0,i.QD)("table",null,[(0,i.QD)("thead",null,[(0,i.QD)("tr",null,[(0,i.QD)("th",null,"No."),(0,i.QD)("th",null,"Name"),(0,i.QD)("th",null,"Price"),(0,i.QD)("th",null,"Amount"),(0,i.QD)("th",null,"Delete")])])])],-1))),I={id:"included-assets-tbody"},B=["onClick"],q={id:"find-assets"},U={id:"find-assets-search"},F={id:"find-assets-suggest"},L=["onClick"],j={id:"find-assets-btns"};function H(t,o,e,n,s,a){return(0,i.Wz)(),(0,i.An)("div",z,[(0,i.QD)("div",x,[K,(0,i.QD)("div",I,[(0,i.QD)("table",null,[(0,i.QD)("tbody",null,[((0,i.Wz)(!0),(0,i.An)(i.ae,null,(0,i.mi)(s.addAssetsData,((t,o)=>((0,i.Wz)(),(0,i.An)("tr",{key:o},[(0,i.QD)("td",null,(0,d.WA)(o+1),1),(0,i.QD)("td",null,(0,d.WA)(t),1),(0,i.QD)("td",null,[(0,i.QD)("input",{class:(0,d.WN)("price-"+String(t)),type:"text"},null,2)]),(0,i.QD)("td",null,[(0,i.QD)("input",{class:(0,d.WN)("amount-"+String(t)),type:"number",min:"1",required:"",value:"1"},null,2)]),(0,i.QD)("td",null,[(0,i.QD)("button",{onClick:o=>a.removeAsset(t)},"X",8,B)])])))),128))])])])]),(0,i.QD)("div",q,[(0,i.QD)("div",U,[(0,i.wt)((0,i.QD)("input",{type:"text",placeholder:"Set portfolio-name","onUpdate:modelValue":o[0]||(o[0]=t=>s.portfolioName=t)},null,512),[[M.Og,s.portfolioName]]),(0,i.wt)((0,i.QD)("input",{type:"text",placeholder:"Name, ticker symbol, or code","onUpdate:modelValue":o[1]||(o[1]=t=>s.paramForSearch=t)},null,512),[[M.Og,s.paramForSearch]]),(0,i.QD)("ul",F,[0!=s.suggestionResult.length?((0,i.Wz)(!0),(0,i.An)(i.ae,{key:0},(0,i.mi)(s.suggestionResult,((t,o)=>((0,i.Wz)(),(0,i.An)("li",{key:o,onClick:o=>a.addAsset(t.TICKER)},[(0,i.QD)("p",null,(0,d.WA)(t.TICKER),1),(0,i.QD)("p",null,(0,d.WA)(t.NAME),1)],8,L)))),128)):(0,i.g1)("",!0)])]),(0,i.QD)("div",j,[(0,i.QD)("button",{onClick:o[2]||(o[2]=t=>a.makeNewPortfolio())},"EXECUTE"),(0,i.QD)("button",{onClick:o[3]||(o[3]=t=>a.PopupOffByCancelBtn())},"CANCEL")])])])}var X={data(){return{addAssetsData:[],findAssetsData:null,market_fxRates:{Shanghai:"CNY/KRW",Hongkong:"HKD/KRW",Singapore:"SGD/KRW",Us:"USD/KRW"},suggestionResult:[],portfolioName:"New Portfolio",paramForSearch:""}},mounted(){this.findAssetsData=this.$store.state.allAssetsData},watch:{paramForSearch:function(t){""!==t&&null!==t?(this.suggestionResult=[],this.suggestionResult.push(...this.findAssetsData.filter((o=>o.NAME.toLowerCase().startsWith(t.toLowerCase())))),this.suggestionResult.push(...this.findAssetsData.filter((o=>o.TICKER.toLowerCase().startsWith(t.toLowerCase())))),this.suggestionResult=[...new Set(this.suggestionResult)]):this.suggestionResult=[]},addAssetsData:{handler(t,o){this.$nextTick((()=>{let t=document.getElementById("included-assets-tbody"),[o,e]=[t.scrollHeight,t.clientHeight];if(o>e){for(let t of document.querySelectorAll("#included-assets-tbody tr:last-child td"))t.style.borderTop="1px solid gray",t.style.borderBottom="none";t.scrollBy(0,o)}}))},deep:!0}},methods:{makeNewPortfolio:function(){const t={NAME:null===this.portfolioName||""===this.portfolioName?"New Portfolio":this.portfolioName,TYPE:"Customized",ASSETS:this.setAssetsToBeAdded()};0!==Object.keys(t["ASSETS"]).length&&this.$http.post("/portfolio/makeNewPortfolio",{params:t}).then((t=>{this.$emit("emitDataAdded",1),this.PopupOffByCancelBtn()})).catch((t=>{t.message.indexOf("Network Error")>-1&&alert("Error")}))},setAssetsToBeAdded:function(){const t={};for(const o of this.addAssetsData){let e=this.findAssetsData[this.findAssetsData.findIndex((t=>t.TICKER===o))].MARKET;t[o]="Korea"===e?Number(document.querySelector(`.price-${o}`).value)*Number(document.querySelector(`.amount-${o}`).value):Number(document.querySelector(`.price-${o}`).value)*Number(document.querySelector(`.amount-${o}`).value)*Number(this.$store.state.fxRates[this.market_fxRates[e]])}return t},addAsset:function(t){let o=this.addAssetsData.find((o=>o===t));if(void 0===o){let o=this.findAssetsData[this.findAssetsData.findIndex((o=>o.TICKER===t))].MARKET,e=0;this.$http.get("/portfolio/addAsset",{params:{TICKER:t,MARKET:o}}).then((o=>{this.addAssetsData.push(t),e=o.data[0].Close})).then((o=>{e=e.toFixed(e%1===0?0:4).toLocaleString(),document.querySelector(`.price-${t}`).value=e})).catch((t=>console.log(t)))}},removeAsset:function(t){this.addAssetsData.splice(this.addAssetsData.findIndex((o=>o===t)),1)},PopupOffByCancelBtn:function(){this.$emit("PopupSwitchOff",!1)}}};const V=(0,v.c)(X,[["render",H],["__scopeId","data-v-4fd59fb7"]]);var Y=V,G={components:{MainPortfolio:S,SubPortfolio:_,PopupSlot:$.c,NewPortfolio:Y},data(){return{MainPortfolioData:null,popUpOnOff:!1,dataAdded:null}},methods:{sendDataToMain(t){this.MainPortfolioData=t},setPopupSwitch:function(t){this.popUpOnOff=t},funcDataAdded:function(t){this.dataAdded+=t}}};const J=(0,v.c)(G,[["render",l],["__scopeId","data-v-0c2e63f8"]]);var Z=J}}]);
//# sourceMappingURL=208.c9416ed1.js.map